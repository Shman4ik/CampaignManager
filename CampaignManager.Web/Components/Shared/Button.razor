@namespace CampaignManager.Web.Components.Shared

<button @onclick="OnClick"
        disabled="@IsDisabled"
        type="@ButtonType"
        class="@GetButtonClasses()">
    @if (Icon != null)
    {
        <i class="fas @Icon"></i>
    }
    @if (ChildContent != null)
    {
        <span>@ChildContent</span>
    }
</button>

@code {
    [Parameter] public EventCallback OnClick { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public bool IsDisabled { get; set; }
    [Parameter] public string ButtonType { get; set; } = "button";
    [Parameter] public string Variant { get; set; } = "primary"; // primary, secondary, success, error, warning, info
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg
    [Parameter] public bool FullWidth { get; set; } = false;
    [Parameter] public string? AdditionalClasses { get; set; }

    private string GetButtonClasses()
    {
        var baseClasses = "inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all duration-200 shadow-sm";
        
        // Size classes
        var sizeClasses = Size.ToLower() switch
        {
            "sm" => "min-h-[36px] px-3 py-1.5 text-sm",
            "lg" => "min-h-[52px] px-8 py-4 text-lg",
            _ => "min-h-[44px] px-4 sm:px-5 py-2 text-sm sm:text-base"
        };

        // Width classes
        var widthClasses = FullWidth ? "w-full" : "";

        // Variant classes
        var variantClasses = IsDisabled
            ? "bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"
            : Variant.ToLower() switch
            {
                "primary" => "bg-primary-700 hover:bg-primary-800 active:bg-primary-900 text-white shadow-sm hover:shadow-md",
                "secondary" => "bg-gray-200 text-gray-800 hover:bg-gray-300 active:bg-gray-400 border border-gray-300",
                "success" => "bg-success-600 hover:bg-success-700 active:bg-success-800 text-white shadow-sm hover:shadow-md",
                "error" => "bg-error-600 hover:bg-error-700 active:bg-error-800 text-white shadow-sm hover:shadow-md",
                "warning" => "bg-warning-600 hover:bg-warning-700 active:bg-warning-800 text-white shadow-sm hover:shadow-md",
                "info" => "bg-accent-600 hover:bg-accent-700 active:bg-accent-800 text-white shadow-sm hover:shadow-md",
                "outline-primary" => "bg-transparent text-primary-700 hover:text-primary-900 hover:bg-primary-50 border-2 border-primary-300 hover:border-primary-400",
                "outline-error" => "bg-transparent text-error-600 hover:text-error-800 hover:bg-error-50 border-2 border-error-200 hover:border-error-300",
                _ => "bg-primary-700 hover:bg-primary-800 active:bg-primary-900 text-white shadow-sm hover:shadow-md"
            };

        return $"{baseClasses} {sizeClasses} {widthClasses} {variantClasses} {AdditionalClasses}".Trim();
    }
}

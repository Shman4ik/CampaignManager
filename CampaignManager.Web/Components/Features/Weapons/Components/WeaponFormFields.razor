@using CampaignManager.Web.Components.Features.Weapons.Model
@using CampaignManager.Web.Extensions
@namespace CampaignManager.Web.Components.Features.Weapons.Components

<EditForm Model="Weapon" OnValidSubmit="OnValidSubmit" Id="@FormId">
    <DataAnnotationsValidator/>
    <Microsoft.AspNetCore.Components.Forms.ValidationSummary
        class="mb-6 p-4 bg-red-50 text-red-700 rounded-xl border-2 border-red-200"/>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-2">
            <label for="weaponName" class="block text-sm font-semibold text-gray-700">Название</label>
            <InputText id="weaponName" @bind-Value="Weapon.Name"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Name)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponType" class="block text-sm font-semibold text-gray-700">Тип</label>
            <InputSelect id="weaponType" @bind-Value="Weapon.Type"
                         class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base">
                @foreach (var typeValue in EnumExtensions.GetWeaponTypes())
                {
                    <option value="@typeValue">@typeValue.ToRussianString()</option>
                }
            </InputSelect>
            <ValidationMessage For="@(() => Weapon.Type)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponSkill" class="block text-sm font-semibold text-gray-700">Навык</label>
            <InputText id="weaponSkill" @bind-Value="Weapon.Skill"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Skill)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponDamage" class="block text-sm font-semibold text-gray-700">Урон</label>
            <InputText id="weaponDamage" @bind-Value="Weapon.Damage"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Damage)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponRange" class="block text-sm font-semibold text-gray-700">Дистанция</label>
            <InputText id="weaponRange" @bind-Value="Weapon.Range"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Range)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponAttacks" class="block text-sm font-semibold text-gray-700">Атаки</label>
            <InputText id="weaponAttacks" @bind-Value="Weapon.Attacks"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Attacks)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponCost" class="block text-sm font-semibold text-gray-700">Стоимость</label>
            <InputText id="weaponCost" @bind-Value="Weapon.Cost"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Cost)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponAmmo" class="block text-sm font-semibold text-gray-700">Боеприпасы</label>
            <InputText id="weaponAmmo" @bind-Value="Weapon.Ammo"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Ammo)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="space-y-2">
            <label for="weaponMalfunction" class="block text-sm font-semibold text-gray-700">Осечка</label>
            <InputText id="weaponMalfunction" @bind-Value="Weapon.Malfunction"
                       class="w-full min-h-[44px] px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base"/>
            <ValidationMessage For="@(() => Weapon.Malfunction)" class="text-red-600 text-sm font-medium"/>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 sm:gap-8 p-4 bg-gray-50 rounded-lg">
            <label class="flex items-center gap-3 cursor-pointer group min-h-[44px]">
                <InputCheckbox id="weaponIs1920" @bind-Value="Weapon.Is1920"
                               class="w-5 h-5 text-primary-600 focus:ring-2 focus:ring-primary-500 border-gray-300 rounded cursor-pointer"/>
                <span class="text-base font-semibold text-gray-700 group-hover:text-primary-600 transition-colors">Эпоха 1920-х</span>
            </label>
            <label class="flex items-center gap-3 cursor-pointer group min-h-[44px]">
                <InputCheckbox id="weaponIsModern" @bind-Value="Weapon.IsModern"
                               class="w-5 h-5 text-primary-600 focus:ring-2 focus:ring-primary-500 border-gray-300 rounded cursor-pointer"/>
                <span class="text-base font-semibold text-gray-700 group-hover:text-primary-600 transition-colors">Современное</span>
            </label>
        </div>

        <div class="md:col-span-2 space-y-2">
            <label for="weaponNotes" class="block text-sm font-semibold text-gray-700">Примечания</label>
            <InputTextArea id="weaponNotes" @bind-Value="Weapon.Notes" rows="4"
                           class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm text-base resize-y"/>
            <ValidationMessage For="@(() => Weapon.Notes)" class="text-red-600 text-sm font-medium"/>
        </div>
    </div>
</EditForm>

@code {
    [Parameter] public Weapon Weapon { get; set; } = new();
    [Parameter] public EventCallback OnValidSubmit { get; set; }
    [Parameter] public string FormId { get; set; } = "weapon-form";
}

@using Blazorise
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<CascadingAuthenticationState>
    <AuthorizeView>
        <Authorized>
            <Bar Background="Background.Primary" ThemeContrast="ThemeContrast.Dark" Class="shadow-sm px-4 py-2">
                <BarBrand>
                    <span class="text-2xl font-bold text-white app-title">Менеджер кампаний</span>
                </BarBrand>
                <BarToggler BarTarget="mainBarMenu" />
                <BarMenu BarTarget="mainBarMenu">
                    <BarStart>
                        <BarItem>
                            <BarLink To="/" Class="text-white fw-bold mx-2 bar-link">Главная</BarLink>
                        </BarItem>
                        <BarItem>
                            <BarLink To="/create-campaign" Class="text-white fw-bold mx-2 bar-link">Создать кампанию</BarLink>
                        </BarItem>
                        <BarItem>
                            <BarLink To="/weapons" Class="text-white fw-bold mx-2 bar-link">Управление оружием</BarLink>
                        </BarItem>
                    </BarStart>
                    <BarEnd>
                        <span class="text-white fw-bold me-3">@context.User.Identity?.Name</span>
                        <BarItem>
                            <Button Color="Color.Light" Class="logout-btn" Clicked="Logout">Выйти</Button>
                        </BarItem>
                    </BarEnd>
                </BarMenu>
            </Bar>
        </Authorized>
        <NotAuthorized>
            <Bar Background="Background.Primary" ThemeContrast="ThemeContrast.Dark" Class="shadow-sm px-4 py-2">
                <BarBrand>
                    <span class="text-2xl font-bold text-white app-title">Менеджер кампаний</span>
                </BarBrand>
                <BarEnd>
                    <BarItem>
                        <Button Color="Color.Light" Class="logout-btn" Tag="a" href="/api/account/login">
                            Войти
                        </Button>
                    </BarItem>
                </BarEnd>
            </Bar>
        </NotAuthorized>
    </AuthorizeView>
</CascadingAuthenticationState>

<style>
    .bar-link:hover {
        color: #FFD600 !important; /* Bright yellow for hover */
        text-decoration: underline;
    }
    .logout-btn {
        color: #1976d2 !important; /* Primary blue */
        font-weight: bold;
        background: #fff !important;
        border: 2px solid #1976d2 !important;
        border-radius: 8px;
        padding: 4px 18px;
        box-shadow: 0 2px 6px rgba(25, 118, 210, 0.08);
        transition: background 0.2s, color 0.2s, border 0.2s;
    }
    .logout-btn:hover {
        background: #1976d2 !important;
        color: #fff !important;
        border: 2px solid #fff !important;
        text-decoration: none;
    }
</style>

@code {
    private void Logout()
    {
        NavigationManager.NavigateTo("api/account/logout", true);
    }
}